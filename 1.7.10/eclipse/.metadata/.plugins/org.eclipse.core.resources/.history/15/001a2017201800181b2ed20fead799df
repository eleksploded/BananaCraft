package com.pikachu923.BananaCraft.block;

import java.util.Random;

import com.pikachu923.BananaCraft.init.Tier1Blocks;
import com.pikachu923.BananaCraft.init.Tier1Items;
import com.pikachu923.BananaCraft.reference.Reference;
import com.pikachu923.BananaCraft.utility.LogHelper;
import com.pikachu923.BananaCraft.utility.func;

import cpw.mods.fml.relauncher.Side;
import cpw.mods.fml.relauncher.SideOnly;
import net.minecraft.block.Block;
import net.minecraft.block.BlockDirt;
import net.minecraft.block.BlockGrass;
import net.minecraft.block.material.Material;
import net.minecraft.client.renderer.texture.IIconRegister;
import net.minecraft.entity.player.EntityPlayer;
import net.minecraft.init.Blocks;
import net.minecraft.item.Item;
import net.minecraft.item.ItemHoe;
import net.minecraft.item.ItemStack;
import net.minecraft.util.IIcon;
import net.minecraft.world.World;

public class BananaGrass extends BlockWrapper{
    String unlocalName;
    String Texture;
    public IIcon Side0;
    public IIcon Side1;
    public IIcon Side2;
    public BananaGrass(String unlocalName){
        super();
        this.setBlockName(unlocalName);
        Texture = Reference.RESOURCE_PREFIX + unlocalName;
        setHardness(0.6F);
        setResistance(0.1F);
        setStepSound(soundTypeGrass);
        this.setCreativeTab(Reference.CreativeTab);
        this.needsRandomTick = true;
    }
    @Override
    @SideOnly(Side.CLIENT)
    public void registerBlockIcons(IIconRegister icon){
        //Bottom
        Side0 = icon.registerIcon(Reference.RESOURCE_PREFIX + "BananaDirt");
        //top
        Side1 = icon.registerIcon(Texture + "_top");
        //sides
        Side2 = icon.registerIcon(Texture + "_side");
    }
public IIcon getIcon(int side, int meta){
        if(side == 0){
            return Side0;
        }else if(side == 1){
            return Side1;
        }else if(side == 2){
            return Side2;
        }else if(side == 3){
            return Side2;
        }else if(side == 4){
            return Side2;
        }else if(side == 5){
            return Side2;
        }
    return null;
    }
	protected boolean canSilkHarvest()
	{
		return true;
	}
	public Item getItemDropped(int metadata, Random random, int fortune) {
	    return Blocks.dirt.getItemDropped(0, random, fortune);
	}
	
	 public boolean onBlockActivated(World world, int x, int y, int z, EntityPlayer player, int in3, float ft1, float ft2, float ft3)
	    {
		Item item = player.inventory.getCurrentItem().getItem();
				if(item instanceof ItemHoe ) {
					world.setBlock(x, y, z, Blocks.farmland);
				}
	        return false;
	    }
	 
	 public void updateTick(World world, int x, int y, int z, Random random) {
		 Block x1 = world.getBlock(x + 1, y, z);
		 Block x2 = world.getBlock(x - 1, y, z);
		 Block z1 = world.getBlock(x, y, z + 1);
		 Block z2 = world.getBlock(x, y, z - 1);
		 Block xz1 = world.getBlock(x + 1, y, z++);
		 Block xz2 = world.getBlock(x + 1, y, z--);
		 Block zx1 = world.getBlock(x - 1, y, z++);
		 Block zx2 = world.getBlock(x - 1, y, z--);
		 int num = random.nextInt(3);
		 LogHelper.Log("Banana Grass Tick. Num: " + num);
		 
			 if(x1 instanceof BlockDirt && num == 2){
				 world.setBlock(x++,y,z, Tier1Blocks.BananaGrass);
			 } else if(x2 instanceof BlockDirt && num == 2){
				 world.setBlock(x--,y,z, Tier1Blocks.BananaGrass);
			 } else if(z1 instanceof BlockDirt && num == 2){
				 world.setBlock(x,y,z++, Tier1Blocks.BananaGrass);
			 } else if(z2 instanceof BlockDirt && num == 2){
				 world.setBlock(x,y,z--, Tier1Blocks.BananaGrass);
			 } else if(xz1 instanceof BlockDirt && num == 2){
				 world.setBlock(x++,y,z++, Tier1Blocks.BananaGrass);
			 } else if(xz2 instanceof BlockDirt && num == 2){
				 world.setBlock(x++,y,z--, Tier1Blocks.BananaGrass);
			 } else if(zx1 instanceof BlockDirt && num == 2){
				 world.setBlock(x--,y,z++, Tier1Blocks.BananaGrass);
			 } else if(zx2 instanceof BlockDirt && num == 2){
				 world.setBlock(x--,y,z--, Tier1Blocks.BananaGrass);
			 }
	 }
}
